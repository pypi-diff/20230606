# Comparing `tmp/pytest_jira_xray-0.8.7-py3-none-any.whl.zip` & `tmp/pytest_jira_xray-0.8.8-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,18 +1,18 @@
-Zip file size: 18700 bytes, number of entries: 16
--rw-r--r--  2.0 unx        0 b- defN 22-May-08 18:35 pytest_xray/__init__.py
--rw-r--r--  2.0 unx     1202 b- defN 22-Oct-23 10:23 pytest_xray/constant.py
--rw-r--r--  2.0 unx      990 b- defN 23-Apr-25 17:54 pytest_xray/evidence.py
--rw-r--r--  2.0 unx      137 b- defN 22-May-08 18:35 pytest_xray/exceptions.py
--rw-r--r--  2.0 unx      836 b- defN 23-Feb-08 22:24 pytest_xray/file_publisher.py
--rw-r--r--  2.0 unx     9205 b- defN 23-Feb-08 22:08 pytest_xray/helper.py
--rw-r--r--  2.0 unx      298 b- defN 22-Sep-25 16:30 pytest_xray/hooks.py
--rw-r--r--  2.0 unx     3648 b- defN 23-May-29 18:01 pytest_xray/plugin.py
--rw-r--r--  2.0 unx     6777 b- defN 23-May-29 18:01 pytest_xray/xray_plugin.py
--rw-r--r--  2.0 unx     4389 b- defN 23-Mar-13 19:16 pytest_xray/xray_publisher.py
--rw-rw-r--  2.0 unx    11357 b- defN 23-May-29 18:04 pytest_jira_xray-0.8.7.dist-info/LICENSE
--rw-r--r--  2.0 unx     8691 b- defN 23-May-29 18:04 pytest_jira_xray-0.8.7.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-29 18:04 pytest_jira_xray-0.8.7.dist-info/WHEEL
--rw-rw-r--  2.0 unx       37 b- defN 23-May-29 18:04 pytest_jira_xray-0.8.7.dist-info/entry_points.txt
--rw-rw-r--  2.0 unx       12 b- defN 23-May-29 18:04 pytest_jira_xray-0.8.7.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1339 b- defN 23-May-29 18:04 pytest_jira_xray-0.8.7.dist-info/RECORD
-16 files, 49010 bytes uncompressed, 16476 bytes compressed:  66.4%
+Zip file size: 19067 bytes, number of entries: 16
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-05 16:58 pytest_xray/__init__.py
+-rw-r--r--  2.0 unx     1239 b- defN 23-Jun-06 16:33 pytest_xray/constant.py
+-rw-r--r--  2.0 unx     1401 b- defN 23-Jun-05 16:58 pytest_xray/evidence.py
+-rw-r--r--  2.0 unx      137 b- defN 23-Jun-05 16:58 pytest_xray/exceptions.py
+-rw-r--r--  2.0 unx      836 b- defN 23-Jun-05 16:58 pytest_xray/file_publisher.py
+-rw-r--r--  2.0 unx     9205 b- defN 23-Jun-05 16:58 pytest_xray/helper.py
+-rw-r--r--  2.0 unx      298 b- defN 23-Jun-05 16:58 pytest_xray/hooks.py
+-rw-r--r--  2.0 unx     3864 b- defN 23-Jun-06 16:33 pytest_xray/plugin.py
+-rw-r--r--  2.0 unx     7458 b- defN 23-Jun-06 16:33 pytest_xray/xray_plugin.py
+-rw-r--r--  2.0 unx     4389 b- defN 23-Jun-05 16:58 pytest_xray/xray_publisher.py
+-rw-r--r--  2.0 unx    11357 b- defN 23-Jun-06 17:44 pytest_jira_xray-0.8.8.dist-info/LICENSE
+-rw-r--r--  2.0 unx     8691 b- defN 23-Jun-06 17:44 pytest_jira_xray-0.8.8.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-06 17:44 pytest_jira_xray-0.8.8.dist-info/WHEEL
+-rw-r--r--  2.0 unx       37 b- defN 23-Jun-06 17:44 pytest_jira_xray-0.8.8.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       12 b- defN 23-Jun-06 17:44 pytest_jira_xray-0.8.8.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1340 b- defN 23-Jun-06 17:44 pytest_jira_xray-0.8.8.dist-info/RECORD
+16 files, 50356 bytes uncompressed, 16843 bytes compressed:  66.6%
```

## zipnote {}

```diff
@@ -24,26 +24,26 @@
 
 Filename: pytest_xray/xray_plugin.py
 Comment: 
 
 Filename: pytest_xray/xray_publisher.py
 Comment: 
 
-Filename: pytest_jira_xray-0.8.7.dist-info/LICENSE
+Filename: pytest_jira_xray-0.8.8.dist-info/LICENSE
 Comment: 
 
-Filename: pytest_jira_xray-0.8.7.dist-info/METADATA
+Filename: pytest_jira_xray-0.8.8.dist-info/METADATA
 Comment: 
 
-Filename: pytest_jira_xray-0.8.7.dist-info/WHEEL
+Filename: pytest_jira_xray-0.8.8.dist-info/WHEEL
 Comment: 
 
-Filename: pytest_jira_xray-0.8.7.dist-info/entry_points.txt
+Filename: pytest_jira_xray-0.8.8.dist-info/entry_points.txt
 Comment: 
 
-Filename: pytest_jira_xray-0.8.7.dist-info/top_level.txt
+Filename: pytest_jira_xray-0.8.8.dist-info/top_level.txt
 Comment: 
 
-Filename: pytest_jira_xray-0.8.7.dist-info/RECORD
+Filename: pytest_jira_xray-0.8.8.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## pytest_xray/constant.py

```diff
@@ -8,14 +8,15 @@
 XRAY_TEST_PLAN_ID = '--testplan'
 XRAY_EXECUTION_ID = '--execution'
 XRAY_ALLOW_DUPLICATE_IDS = '--allow-duplicate-ids'
 JIRA_CLOUD = '--cloud'
 JIRA_API_KEY = '--api-key-auth'
 JIRA_CLIENT_SECRET_AUTH = '--client-secret-auth'
 XRAYPATH = '--xraypath'
+XRAY_ADD_CAPTURES = '--add-captures'
 # all environment variables used by plugin
 ENV_XRAY_API_BASE_URL = 'XRAY_API_BASE_URL'
 ENV_XRAY_API_USER = 'XRAY_API_USER'
 ENV_XRAY_API_PASSWORD = 'XRAY_API_PASSWORD'
 ENV_XRAY_CLIENT_ID = 'XRAY_CLIENT_ID'
 ENV_XRAY_CLIENT_SECRET = 'XRAY_CLIENT_SECRET'
 ENV_XRAY_API_KEY = 'XRAY_API_KEY'
```

## pytest_xray/evidence.py

```diff
@@ -4,14 +4,17 @@
 from pytest_xray.exceptions import XrayError
 
 
 # Content Types
 IMAGE_JPEG: str = 'image/jpeg'
 IMAGE_PNG: str = 'image/png'
 PLAIN_TEXT: str = 'plain/text'
+TEXT_HTML: str = 'text/html'
+APP_JSON: str = 'application/json'
+APP_ZIP: str = 'application/zip'
 
 
 def evidence(data: AnyStr, filename: str, content_type: str) -> Dict[str, str]:
     if isinstance(data, bytes):
         data_base64: str = base64.b64encode(data).decode('utf-8')
     elif isinstance(data, str):
         data_base64 = base64.b64encode(data.encode('utf-8')).decode('utf-8')
@@ -31,7 +34,19 @@
 
 def png(data: AnyStr, filename: str) -> Dict[str, str]:
     return evidence(data, filename, IMAGE_PNG)
 
 
 def text(data: AnyStr, filename: str) -> Dict[str, str]:
     return evidence(data, filename, PLAIN_TEXT)
+
+
+def html(data: AnyStr, filename: str) -> Dict[str, str]:
+    return evidence(data, filename, TEXT_HTML)
+
+
+def json(data: AnyStr, filename: str) -> Dict[str, str]:
+    return evidence(data, filename, APP_JSON)
+
+
+def zip(data: AnyStr, filename: str) -> Dict[str, str]:
+    return evidence(data, filename, APP_ZIP)
```

## pytest_xray/plugin.py

```diff
@@ -13,14 +13,15 @@
     TEST_EXECUTION_ENDPOINT,
     TEST_EXECUTION_ENDPOINT_CLOUD,
     XRAY_ALLOW_DUPLICATE_IDS,
     XRAY_EXECUTION_ID,
     XRAY_PLUGIN,
     XRAY_TEST_PLAN_ID,
     XRAYPATH,
+    XRAY_ADD_CAPTURES,
 )
 from pytest_xray.file_publisher import FilePublisher
 from pytest_xray.helper import get_api_key_auth, get_basic_auth, get_bearer_auth
 from pytest_xray.xray_plugin import XrayPlugin
 from pytest_xray.xray_publisher import ApiKeyAuth, ClientSecretAuth, XrayPublisher
 
 
@@ -32,15 +33,15 @@
         default=False,
         help='Upload test results to JIRA XRAY'
     )
     xray.addoption(
         JIRA_CLOUD,
         action='store_true',
         default=False,
-        help='Use with JIRA XRAY could server'
+        help='Use with JIRA XRAY cloud server'
     )
     xray.addoption(
         JIRA_API_KEY,
         action='store_true',
         default=False,
         help='Use Jira API Key authentication',
     )
@@ -73,14 +74,20 @@
     )
     xray.addoption(
         XRAY_ALLOW_DUPLICATE_IDS,
         action='store_true',
         default=False,
         help='Allow test ids to be present on multiple pytest tests'
     )
+    xray.addoption(
+        XRAY_ADD_CAPTURES,
+        action='store_true',
+        default=False,
+        help='Add captures from log, stdout or/and stderr, to the report comment field'
+    )
 
 
 def pytest_addhooks(pluginmanager):
     pluginmanager.add_hookspecs(hooks)
 
 
 def pytest_configure(config: Config) -> None:
```

## pytest_xray/xray_plugin.py

```diff
@@ -1,9 +1,10 @@
 import datetime as dt
 import os
+import re
 from pathlib import Path
 from typing import List, Optional
 
 import pytest
 from _pytest.config import Config, ExitCode
 from _pytest.mark import Mark
 from _pytest.nodes import Item
@@ -13,14 +14,15 @@
 from pytest_xray.constant import (
     JIRA_CLOUD,
     XRAY_ALLOW_DUPLICATE_IDS,
     XRAY_EXECUTION_ID,
     XRAY_MARKER_NAME,
     XRAY_TEST_PLAN_ID,
     XRAYPATH,
+    XRAY_ADD_CAPTURES,
 )
 from pytest_xray.exceptions import XrayError
 from pytest_xray.helper import (
     STATUS_STR_MAPPER_CLOUD,
     STATUS_STR_MAPPER_JIRA,
     Status,
     TestCase,
@@ -34,14 +36,15 @@
         self.config = config
         self.publisher = publisher
         self.test_execution_id: str = self.config.getoption(XRAY_EXECUTION_ID)
         self.test_plan_id: str = self.config.getoption(XRAY_TEST_PLAN_ID)
         self.is_cloud_server: str = self.config.getoption(JIRA_CLOUD)
         self.allow_duplicate_ids: bool = self.config.getoption(XRAY_ALLOW_DUPLICATE_IDS)
         logfile = self.config.getoption(XRAYPATH)
+        self.add_captures: bool = self.config.getoption(XRAY_ADD_CAPTURES)
         self.logfile: Optional[str] = self._get_normalize_logfile(logfile) if logfile else None
         self.issue_id = None  # issue id returned by XRAY server
         self.exception = None  # keeps an exception if raised by XrayPublisher
         self.test_execution: TestExecution = TestExecution(
             test_execution_key=self.test_execution_id,
             test_plan_key=self.test_plan_id
         )
@@ -112,19 +115,32 @@
             return
 
         test_keys = report.test_keys.get(report.nodeid)
         if test_keys is None:
             return
 
         evidences = getattr(report, 'evidences', [])
+
+        comment = report.longreprtext
+        if self.add_captures:
+            comment += '\n'
+            if report.capstdout:
+                comment += f"{'-'*29} Captured stdout call {'-'*29}\n{report.capstdout}"
+            if report.capstderr:
+                comment += f"{'-'*29} Captured stderr call {'-'*29}\n{report.capstderr}"
+            if report.caplog:
+                # Remove the ncurses escape chars used to color log level
+                logt = re.subn('\x1b.*?m', '', report.caplog)
+                comment += f"{'-'*30} Captured log call {'-'*31}\n{logt[0]}"
+
         for test_key in test_keys:
             new_test_case = TestCase(
                 test_key=test_key,
                 status=status,
-                comment=report.longreprtext,
+                comment=comment,
                 status_str_mapper=self.status_str_mapper,
                 evidences=evidences
             )
             try:
                 test_case = self.test_execution.find_test_case(test_key)
             except KeyError:
                 self.test_execution.append(new_test_case)
```

## Comparing `pytest_jira_xray-0.8.7.dist-info/LICENSE` & `pytest_jira_xray-0.8.8.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `pytest_jira_xray-0.8.7.dist-info/METADATA` & `pytest_jira_xray-0.8.8.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pytest-jira-xray
-Version: 0.8.7
+Version: 0.8.8
 Summary: pytest plugin to integrate tests with JIRA XRAY
 Home-page: https://github.com/fundakol/pytest-jira-xray
 Author: Lukasz Fundakowski
 Author-email: fundakol@yahoo.com
 Keywords: pytest,JIRA,XRAY
 Classifier: Development Status :: 4 - Beta
 Classifier: Programming Language :: Python :: 3
```

## Comparing `pytest_jira_xray-0.8.7.dist-info/RECORD` & `pytest_jira_xray-0.8.8.dist-info/RECORD`

 * *Files 24% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 pytest_xray/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-pytest_xray/constant.py,sha256=MpbsAbTU2MsPMvDvklaYMBUCOn59p47CDLc8pHjR4bY,1202
-pytest_xray/evidence.py,sha256=R35eGmJxozw8Rb49kpn6fs7lB0haBDJH5XHRVqm72u4,990
+pytest_xray/constant.py,sha256=_qReSapSPLOVaFdUPgkv1HPCYv9FPo-lt1ZdiBHt7Is,1239
+pytest_xray/evidence.py,sha256=u7NvWhdaRTfsXurwwOiHBrET1qlRa40p0NJnhT_cu0Q,1401
 pytest_xray/exceptions.py,sha256=IS-_20kUX3rUTdg_22x5itn2rq-JgpXXO1r5BMq42Xo,137
 pytest_xray/file_publisher.py,sha256=lgB8Vfy8wbWWncj17-aE8v_hIM8hLbAUVkmzHQXrhRk,836
 pytest_xray/helper.py,sha256=3jxNEGQ3OBs1T-txXNTc8PeXHMx_CC1SALh05QVhH2g,9205
 pytest_xray/hooks.py,sha256=Jk9kkIXFdY_WaG7jiDlmWMrlWt-KTXWgy954X5021HY,298
-pytest_xray/plugin.py,sha256=HWiStDkcWIOzB6y9BpjWbs6Y1eOJPhWbfWHx1x1z9_A,3648
-pytest_xray/xray_plugin.py,sha256=ht7TYbcTEJsuAMs5Fg9vJK4dlm_4PGIUU_uz55FAMRo,6777
+pytest_xray/plugin.py,sha256=jJlbYto3_tUuHeCRiCj_myCXmyerJcwvVeX7qsxKzgk,3864
+pytest_xray/xray_plugin.py,sha256=-hqxHvXDC9kj5fB_5T0CKPtk9GM4d0pE1pLydqNi44s,7458
 pytest_xray/xray_publisher.py,sha256=LA-geG9YpYXgB1G7CfJzCy_w8fh0FPoar8y3h_0S8PM,4389
-pytest_jira_xray-0.8.7.dist-info/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
-pytest_jira_xray-0.8.7.dist-info/METADATA,sha256=08e9kn61mxTK3Mp7fcHts-r1YI5dY5GimBsa5Dp7Yr8,8691
-pytest_jira_xray-0.8.7.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-pytest_jira_xray-0.8.7.dist-info/entry_points.txt,sha256=uRmCo_t9ZkNt-7ffZAO7IpCbHFKw21w7d8veBr6hjjk,37
-pytest_jira_xray-0.8.7.dist-info/top_level.txt,sha256=gDf8RZBMKKaQj9pocszUu1-vQZm_vkT4UGrzVxiKpPY,12
-pytest_jira_xray-0.8.7.dist-info/RECORD,,
+pytest_jira_xray-0.8.8.dist-info/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
+pytest_jira_xray-0.8.8.dist-info/METADATA,sha256=8jGhDtHbomfyBoOWNvMz2g05hSXPCzkZ-OdTFEdJLN0,8691
+pytest_jira_xray-0.8.8.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+pytest_jira_xray-0.8.8.dist-info/entry_points.txt,sha256=uRmCo_t9ZkNt-7ffZAO7IpCbHFKw21w7d8veBr6hjjk,37
+pytest_jira_xray-0.8.8.dist-info/top_level.txt,sha256=gDf8RZBMKKaQj9pocszUu1-vQZm_vkT4UGrzVxiKpPY,12
+pytest_jira_xray-0.8.8.dist-info/RECORD,,
```

