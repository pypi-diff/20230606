# Comparing `tmp/neon_mq_connector-0.6.1a8-py3-none-any.whl.zip` & `tmp/neon_mq_connector-0.6.1a9-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,17 +1,17 @@
-Zip file size: 26366 bytes, number of entries: 15
--rw-r--r--  2.0 unx     1884 b- defN 23-Apr-27 21:58 neon_mq_connector/__init__.py
--rw-r--r--  2.0 unx     3715 b- defN 23-Apr-27 21:58 neon_mq_connector/config.py
--rw-r--r--  2.0 unx    32416 b- defN 23-Apr-27 21:58 neon_mq_connector/connector.py
--rw-r--r--  2.0 unx     2011 b- defN 23-Apr-27 21:58 neon_mq_connector/utils/__init__.py
--rw-r--r--  2.0 unx     6436 b- defN 23-Apr-27 21:58 neon_mq_connector/utils/client_utils.py
--rw-r--r--  2.0 unx     7747 b- defN 23-Apr-27 21:58 neon_mq_connector/utils/connection_utils.py
--rw-r--r--  2.0 unx     3215 b- defN 23-Apr-27 21:58 neon_mq_connector/utils/network_utils.py
--rw-r--r--  2.0 unx     3304 b- defN 23-Apr-27 21:58 neon_mq_connector/utils/rabbit_utils.py
--rw-r--r--  2.0 unx     2131 b- defN 23-Apr-27 21:58 neon_mq_connector/utils/thread_utils.py
--rw-r--r--  2.0 unx     1635 b- defN 23-Apr-27 21:58 neon_mq_connector-0.6.1a8.dist-info/LICENSE.md
--rw-r--r--  2.0 unx     3485 b- defN 23-Apr-27 21:58 neon_mq_connector-0.6.1a8.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-27 21:58 neon_mq_connector-0.6.1a8.dist-info/WHEEL
--rw-r--r--  2.0 unx       18 b- defN 23-Apr-27 21:58 neon_mq_connector-0.6.1a8.dist-info/top_level.txt
--rw-r--r--  2.0 unx        1 b- defN 23-Apr-27 21:58 neon_mq_connector-0.6.1a8.dist-info/zip-safe
--rw-rw-r--  2.0 unx     1382 b- defN 23-Apr-27 21:58 neon_mq_connector-0.6.1a8.dist-info/RECORD
-15 files, 69472 bytes uncompressed, 24030 bytes compressed:  65.4%
+Zip file size: 26471 bytes, number of entries: 15
+-rw-r--r--  2.0 unx     1884 b- defN 23-May-01 21:08 neon_mq_connector/__init__.py
+-rw-r--r--  2.0 unx     3715 b- defN 23-May-01 21:08 neon_mq_connector/config.py
+-rw-r--r--  2.0 unx    32869 b- defN 23-May-01 21:08 neon_mq_connector/connector.py
+-rw-r--r--  2.0 unx     2011 b- defN 23-May-01 21:08 neon_mq_connector/utils/__init__.py
+-rw-r--r--  2.0 unx     6436 b- defN 23-May-01 21:08 neon_mq_connector/utils/client_utils.py
+-rw-r--r--  2.0 unx     7700 b- defN 23-May-01 21:08 neon_mq_connector/utils/connection_utils.py
+-rw-r--r--  2.0 unx     3215 b- defN 23-May-01 21:08 neon_mq_connector/utils/network_utils.py
+-rw-r--r--  2.0 unx     3304 b- defN 23-May-01 21:08 neon_mq_connector/utils/rabbit_utils.py
+-rw-r--r--  2.0 unx     2131 b- defN 23-May-01 21:08 neon_mq_connector/utils/thread_utils.py
+-rw-r--r--  2.0 unx     1635 b- defN 23-May-01 21:08 neon_mq_connector-0.6.1a9.dist-info/LICENSE.md
+-rw-r--r--  2.0 unx     3485 b- defN 23-May-01 21:08 neon_mq_connector-0.6.1a9.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-01 21:08 neon_mq_connector-0.6.1a9.dist-info/WHEEL
+-rw-r--r--  2.0 unx       18 b- defN 23-May-01 21:08 neon_mq_connector-0.6.1a9.dist-info/top_level.txt
+-rw-r--r--  2.0 unx        1 b- defN 23-May-01 21:08 neon_mq_connector-0.6.1a9.dist-info/zip-safe
+-rw-rw-r--  2.0 unx     1382 b- defN 23-May-01 21:08 neon_mq_connector-0.6.1a9.dist-info/RECORD
+15 files, 69878 bytes uncompressed, 24135 bytes compressed:  65.5%
```

## zipnote {}

```diff
@@ -21,26 +21,26 @@
 
 Filename: neon_mq_connector/utils/rabbit_utils.py
 Comment: 
 
 Filename: neon_mq_connector/utils/thread_utils.py
 Comment: 
 
-Filename: neon_mq_connector-0.6.1a8.dist-info/LICENSE.md
+Filename: neon_mq_connector-0.6.1a9.dist-info/LICENSE.md
 Comment: 
 
-Filename: neon_mq_connector-0.6.1a8.dist-info/METADATA
+Filename: neon_mq_connector-0.6.1a9.dist-info/METADATA
 Comment: 
 
-Filename: neon_mq_connector-0.6.1a8.dist-info/WHEEL
+Filename: neon_mq_connector-0.6.1a9.dist-info/WHEEL
 Comment: 
 
-Filename: neon_mq_connector-0.6.1a8.dist-info/top_level.txt
+Filename: neon_mq_connector-0.6.1a9.dist-info/top_level.txt
 Comment: 
 
-Filename: neon_mq_connector-0.6.1a8.dist-info/zip-safe
+Filename: neon_mq_connector-0.6.1a9.dist-info/zip-safe
 Comment: 
 
-Filename: neon_mq_connector-0.6.1a8.dist-info/RECORD
+Filename: neon_mq_connector-0.6.1a9.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## neon_mq_connector/connector.py

```diff
@@ -31,29 +31,35 @@
 import time
 import uuid
 import pika
 import pika.exceptions
 import threading
 
 from abc import ABC
-from typing import Optional, Dict, Any
+from typing import Optional, Dict, Any, Union
 from pika.exchange_type import ExchangeType
 from ovos_utils.log import LOG
 
 from neon_mq_connector.config import load_neon_mq_config
 from neon_mq_connector.utils import RepeatingTimer, retry, wait_for_mq_startup
 from neon_mq_connector.utils.network_utils import dict_to_b64
 
 
+def _default_error_handler(*args):
+    LOG.warning("Error handler not defined")
+    raise Exception(*args)
+
+
 class ConsumerThread(threading.Thread):
 
     # retry to handle connection failures in case MQ server is still starting
     @retry(use_self=True)
     def __init__(self, connection_params: pika.ConnectionParameters,
-                 queue: str, callback_func: callable, error_func: callable,
+                 queue: str, callback_func: callable,
+                 error_func: callable = _default_error_handler,
                  auto_ack: bool = True,
                  queue_reset: bool = False,
                  queue_exclusive: bool = False,
                  exchange: Optional[str] = None,
                  exchange_reset: bool = False,
                  exchange_type: str = ExchangeType.direct, *args, **kwargs):
         """
@@ -174,14 +180,22 @@
         self._service_id = None
         self.service_name = service_name
         self.consumers = dict()
         self.consumer_properties = dict()
         self._vhost = None
         self._sync_thread = None
         self._observer_thread = None
+
+        # Define properties and initialize them
+        self.sync_period = 0
+        self.observe_period = 0
+        self.vhost_prefix = ""
+        self.default_testing_prefix = 'test'
+        self.testing_envs = set()
+        self.testing_prefix_envs = None
         self.__init_configurable_properties()
 
     @property
     def config(self):
         if not self._config:
             self._config = self.init_config()
         return self._config
@@ -328,15 +342,16 @@
 
     @classmethod
     def emit_mq_message(cls,
                         connection: pika.BlockingConnection,
                         request_data: dict,
                         exchange: Optional[str] = '',
                         queue: Optional[str] = '',
-                        exchange_type: Optional[str] = ExchangeType.direct,
+                        exchange_type: Union[str, ExchangeType] =
+                        ExchangeType.direct,
                         expiration: int = 1000) -> str:
         """
         Emits request to the neon api service on the MQ bus
         :param connection: pika connection object
         :param queue: name of the queue to publish in
         :param request_data: dictionary with the request data
         :param exchange: name of the exchange (optional)
```

## neon_mq_connector/utils/connection_utils.py

```diff
@@ -117,20 +117,19 @@
                     except Exception as ex:
                         LOG.error(f'Failed to execute '
                                   f'callback_on_attempt_failure function '
                                   f'{callback_on_attempt_failure.__name__}('
                                   f'{callback_on_attempt_failure_args}) - {ex}')
                     sleep_timeout = get_timeout(backoff_factor=backoff_factor,
                                                 number_of_retries=num_attempts)
-                    LOG.error(f'{error_body}: {e}. '
-                              f'Timeout for {sleep_timeout} secs')
+                    LOG.warning(f'{error_body}: {e}.')
+                    LOG.info(f'Timeout for {sleep_timeout} secs')
                     num_attempts += 1
                     time.sleep(sleep_timeout)
-            LOG.error(f'Failed to execute function {error_body} after '
-                      f'{num_retries} attempts')
+            LOG.error(f'Failed to execute after {num_retries} attempts')
             if callback_on_exceeded:
                 if with_self and isinstance(callback_on_exceeded, str):
                     return getattr(self, callback_on_exceeded)(
                         *callback_on_exceeded_args)
                 elif isinstance(callback_on_exceeded, Callable):
                     return callback_on_exceeded(*callback_on_exceeded_args)
         return wrapper
```

## Comparing `neon_mq_connector-0.6.1a8.dist-info/LICENSE.md` & `neon_mq_connector-0.6.1a9.dist-info/LICENSE.md`

 * *Files identical despite different names*

## Comparing `neon_mq_connector-0.6.1a8.dist-info/METADATA` & `neon_mq_connector-0.6.1a9.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: neon-mq-connector
-Version: 0.6.1a8
+Version: 0.6.1a9
 Summary: MQ Connector for Neon Modules
 Home-page: https://github.com/NeonGeckoCom/neon_mq_connector
 Author: NeonGecko
 Author-email: developers@neon.ai
 License: BSD-3-Clause
 Classifier: Intended Audience :: Developers
 Classifier: Programming Language :: Python :: 3.6
```

## Comparing `neon_mq_connector-0.6.1a8.dist-info/RECORD` & `neon_mq_connector-0.6.1a9.dist-info/RECORD`

 * *Files 18% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 neon_mq_connector/__init__.py,sha256=WC23UcWdwM76Ii_a3AKfTkDxGFR8CbvfMy0XfJreRHs,1884
 neon_mq_connector/config.py,sha256=dn4fhUoulW3iH9ngXSFkXRuZpyih-HX7csJXrXcRRqU,3715
-neon_mq_connector/connector.py,sha256=jB_pSSCl3WROuxGEraP9tVot1JO38-pqrznEI6bm3M4,32416
+neon_mq_connector/connector.py,sha256=UVTfD0B9doGSEkkPjJPTlz2ycGogZfUM4V-pyc8sH2k,32869
 neon_mq_connector/utils/__init__.py,sha256=qZ9lxm8PMtMf_kEiFaKPDwGhlQEa0kv_DJheWy4MnmU,2011
 neon_mq_connector/utils/client_utils.py,sha256=_zuMqXMPPCBDqa-2ba48MlLmyL0wr3kPuKNbdRuOosQ,6436
-neon_mq_connector/utils/connection_utils.py,sha256=eQrQOS6wDURXvyYEgru25VqQX80Uc6TsT5imzutf4Ds,7747
+neon_mq_connector/utils/connection_utils.py,sha256=lzI8SHdgrpVswtLLC-ZqNwGQ9iwn6j_C4Tz4Fx18ctk,7700
 neon_mq_connector/utils/network_utils.py,sha256=luK6hV-4URhxEcg3sLAXrliyRok9LAzfts7s1GL4W14,3215
 neon_mq_connector/utils/rabbit_utils.py,sha256=rDzbAHRd7-KF66hPlPuZ4kifxtnO48RTQt9omSYq3wI,3304
 neon_mq_connector/utils/thread_utils.py,sha256=LnF4H7bhU9jFkMbS2WDVbrc_qpaNaC2ZCHxOracdrfA,2131
-neon_mq_connector-0.6.1a8.dist-info/LICENSE.md,sha256=KxXbLh0XZkaLbNrj5ksC1Hl04EeiMbY-I0pGhKTPBRc,1635
-neon_mq_connector-0.6.1a8.dist-info/METADATA,sha256=MjeGEiQQGefDhsGA6f6A7GJfWHET8dUZ05KytTqDoi8,3485
-neon_mq_connector-0.6.1a8.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-neon_mq_connector-0.6.1a8.dist-info/top_level.txt,sha256=7GVRwlmJO6V-WXJ_pATe174KQVc2l8xx_2KVDbehPxE,18
-neon_mq_connector-0.6.1a8.dist-info/zip-safe,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
-neon_mq_connector-0.6.1a8.dist-info/RECORD,,
+neon_mq_connector-0.6.1a9.dist-info/LICENSE.md,sha256=KxXbLh0XZkaLbNrj5ksC1Hl04EeiMbY-I0pGhKTPBRc,1635
+neon_mq_connector-0.6.1a9.dist-info/METADATA,sha256=WF0ilio6DbwHEJXQ17LGCoJEr3fD9U9k-kqzG3HrSKs,3485
+neon_mq_connector-0.6.1a9.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+neon_mq_connector-0.6.1a9.dist-info/top_level.txt,sha256=7GVRwlmJO6V-WXJ_pATe174KQVc2l8xx_2KVDbehPxE,18
+neon_mq_connector-0.6.1a9.dist-info/zip-safe,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
+neon_mq_connector-0.6.1a9.dist-info/RECORD,,
```

