# Comparing `tmp/odoo14_addon_l10n_br_account-14.0.6.4.1.dev1-py3-none-any.whl.zip` & `tmp/odoo14_addon_l10n_br_account-14.0.7.0.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,74 +1,73 @@
-Zip file size: 100789 bytes, number of entries: 72
--rw-r--r--  2.0 unx     3735 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/README.rst
--rw-r--r--  2.0 unx      132 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/__init__.py
--rw-r--r--  2.0 unx     1669 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/__manifest__.py
--rw-r--r--  2.0 unx     4574 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/hooks.py
--rw-r--r--  2.0 unx     4977 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/data/account_tax_group.xml
--rw-r--r--  2.0 unx    10424 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/data/account_tax_template.xml
--rw-r--r--  2.0 unx      401 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/demo/res_users_demo.xml
--rw-r--r--  2.0 unx    37019 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/i18n/l10n_br_account.pot
--rw-r--r--  2.0 unx    42093 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/i18n/pt_BR.po
--rw-r--r--  2.0 unx     5558 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/images/l10n_br-hover.png
--rw-r--r--  2.0 unx     4953 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/images/l10n_br.png
--rw-r--r--  2.0 unx      539 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/__init__.py
--rw-r--r--  2.0 unx      694 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/account_document_line_mixin.py
--rw-r--r--  2.0 unx     1046 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/account_incoterms.py
--rw-r--r--  2.0 unx    26161 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/account_invoice.py
--rw-r--r--  2.0 unx    21790 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/account_invoice_line.py
--rw-r--r--  2.0 unx      300 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/account_journal.py
--rw-r--r--  2.0 unx     4819 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/account_move.py
--rw-r--r--  2.0 unx     6584 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/account_tax.py
--rw-r--r--  2.0 unx      742 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/account_tax_group.py
--rw-r--r--  2.0 unx      939 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/account_tax_template.py
--rw-r--r--  2.0 unx     5290 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/fiscal_document.py
--rw-r--r--  2.0 unx     2140 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/fiscal_document_line.py
--rw-r--r--  2.0 unx     2933 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/fiscal_operation.py
--rw-r--r--  2.0 unx      452 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/fiscal_operation_line.py
--rw-r--r--  2.0 unx     3494 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/fiscal_tax.py
--rw-r--r--  2.0 unx      408 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/fiscal_tax_group.py
--rw-r--r--  2.0 unx      212 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/models/res_company.py
--rw-r--r--  2.0 unx       52 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      460 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx       95 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/readme/HISTORY.rst
--rw-r--r--  2.0 unx       52 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/readme/INSTALL.rst
--rw-r--r--  2.0 unx        0 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/readme/ROADMAP.rst
--rw-r--r--  2.0 unx       46 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/readme/USAGE.rst
--rw-r--r--  2.0 unx       39 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/report/__init__.py
--rw-r--r--  2.0 unx     4302 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/report/account_invoice_report.py
--rw-r--r--  2.0 unx     1704 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/report/account_invoice_report_view.xml
--rw-r--r--  2.0 unx     3118 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/security/ir.model.access.csv
--rw-r--r--  2.0 unx    11654 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/static/description/icon.png
--rw-r--r--  2.0 unx    14124 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/static/description/index.html
--rw-r--r--  2.0 unx      298 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/tests/__init__.py
--rw-r--r--  2.0 unx     1496 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/tests/test_account_taxes.py
--rw-r--r--  2.0 unx      689 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/tests/test_company_fiscal_dummy.py
--rw-r--r--  2.0 unx    14349 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/tests/test_customer_invoice_dummy.py
--rw-r--r--  2.0 unx     5967 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/tests/test_invoice_general_cases.py
--rw-r--r--  2.0 unx     6078 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/tests/test_invoice_refund.py
--rw-r--r--  2.0 unx     7947 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/tests/test_supplier_invoice_dummy.py
--rw-r--r--  2.0 unx    26415 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/views/account_invoice_view.xml
--rw-r--r--  2.0 unx     1093 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/views/account_tax_template_view.xml
--rw-r--r--  2.0 unx     1065 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/views/account_tax_view.xml
--rw-r--r--  2.0 unx      526 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/views/document_line_view.xml
--rw-r--r--  2.0 unx      504 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/views/document_view.xml
--rw-r--r--  2.0 unx     1963 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/views/fiscal_invoice_line_view.xml
--rw-r--r--  2.0 unx     5120 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/views/fiscal_invoice_view.xml
--rw-r--r--  2.0 unx      630 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/views/fiscal_operation_line_view.xml
--rw-r--r--  2.0 unx     2339 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/views/fiscal_operation_view.xml
--rw-r--r--  2.0 unx     8380 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/views/l10n_br_account_action.xml
--rw-r--r--  2.0 unx      963 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/views/l10n_br_account_menu.xml
--rw-r--r--  2.0 unx     1434 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/views/res_partner_view.xml
--rw-r--r--  2.0 unx      254 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/wizards/__init__.py
--rw-r--r--  2.0 unx      684 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/wizards/account_move_reversal.py
--rw-r--r--  2.0 unx      524 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/wizards/account_move_reversal_view.xml
--rw-r--r--  2.0 unx      836 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/wizards/base_wizard_mixin.py
--rw-r--r--  2.0 unx      602 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/wizards/wizard_document_cancel.py
--rw-r--r--  2.0 unx      548 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/wizards/wizard_document_correction.py
--rw-r--r--  2.0 unx      427 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/wizards/wizard_document_invalidate.py
--rw-r--r--  2.0 unx      533 b- defN 23-Jun-04 03:43 odoo/addons/l10n_br_account/wizards/wizard_document_status.xml
--rw-r--r--  2.0 unx     4460 b- defN 23-Jun-04 03:44 odoo14_addon_l10n_br_account-14.0.6.4.1.dev1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jun-04 03:44 odoo14_addon_l10n_br_account-14.0.6.4.1.dev1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Jun-04 03:44 odoo14_addon_l10n_br_account-14.0.6.4.1.dev1.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     7949 b- defN 23-Jun-04 03:44 odoo14_addon_l10n_br_account-14.0.6.4.1.dev1.dist-info/RECORD
-72 files, 333894 bytes uncompressed, 87423 bytes compressed:  73.8%
+Zip file size: 99782 bytes, number of entries: 71
+-rw-r--r--  2.0 unx     3735 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/README.rst
+-rw-r--r--  2.0 unx      132 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/__init__.py
+-rw-r--r--  2.0 unx     1669 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/__manifest__.py
+-rw-r--r--  2.0 unx     4574 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/hooks.py
+-rw-r--r--  2.0 unx     4977 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/data/account_tax_group.xml
+-rw-r--r--  2.0 unx    10424 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/data/account_tax_template.xml
+-rw-r--r--  2.0 unx      401 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/demo/res_users_demo.xml
+-rw-r--r--  2.0 unx    37004 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/i18n/l10n_br_account.pot
+-rw-r--r--  2.0 unx    42093 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/i18n/pt_BR.po
+-rw-r--r--  2.0 unx     5558 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/images/l10n_br-hover.png
+-rw-r--r--  2.0 unx     4953 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/images/l10n_br.png
+-rw-r--r--  2.0 unx      506 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/__init__.py
+-rw-r--r--  2.0 unx      694 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/account_document_line_mixin.py
+-rw-r--r--  2.0 unx     1046 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/account_incoterms.py
+-rw-r--r--  2.0 unx      300 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/account_journal.py
+-rw-r--r--  2.0 unx    30135 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/account_move.py
+-rw-r--r--  2.0 unx    21790 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/account_move_line.py
+-rw-r--r--  2.0 unx     6584 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/account_tax.py
+-rw-r--r--  2.0 unx      742 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/account_tax_group.py
+-rw-r--r--  2.0 unx      939 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/account_tax_template.py
+-rw-r--r--  2.0 unx     5290 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/fiscal_document.py
+-rw-r--r--  2.0 unx     2140 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/fiscal_document_line.py
+-rw-r--r--  2.0 unx     2933 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/fiscal_operation.py
+-rw-r--r--  2.0 unx      452 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/fiscal_operation_line.py
+-rw-r--r--  2.0 unx     3494 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/fiscal_tax.py
+-rw-r--r--  2.0 unx      408 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/fiscal_tax_group.py
+-rw-r--r--  2.0 unx      212 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/models/res_company.py
+-rw-r--r--  2.0 unx       52 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx      460 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx       95 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/readme/HISTORY.rst
+-rw-r--r--  2.0 unx       52 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/readme/INSTALL.rst
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx       46 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/readme/USAGE.rst
+-rw-r--r--  2.0 unx       39 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/report/__init__.py
+-rw-r--r--  2.0 unx     4302 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/report/account_invoice_report.py
+-rw-r--r--  2.0 unx     1704 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/report/account_invoice_report_view.xml
+-rw-r--r--  2.0 unx     3118 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/security/ir.model.access.csv
+-rw-r--r--  2.0 unx    11654 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/static/description/icon.png
+-rw-r--r--  2.0 unx    14124 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/static/description/index.html
+-rw-r--r--  2.0 unx      298 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/tests/__init__.py
+-rw-r--r--  2.0 unx     1496 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/tests/test_account_taxes.py
+-rw-r--r--  2.0 unx      689 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/tests/test_company_fiscal_dummy.py
+-rw-r--r--  2.0 unx    14349 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/tests/test_customer_invoice_dummy.py
+-rw-r--r--  2.0 unx     5967 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/tests/test_invoice_general_cases.py
+-rw-r--r--  2.0 unx     6078 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/tests/test_invoice_refund.py
+-rw-r--r--  2.0 unx     7947 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/tests/test_supplier_invoice_dummy.py
+-rw-r--r--  2.0 unx    26415 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/views/account_invoice_view.xml
+-rw-r--r--  2.0 unx     1093 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/views/account_tax_template_view.xml
+-rw-r--r--  2.0 unx     1065 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/views/account_tax_view.xml
+-rw-r--r--  2.0 unx      526 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/views/document_line_view.xml
+-rw-r--r--  2.0 unx      504 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/views/document_view.xml
+-rw-r--r--  2.0 unx     1963 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/views/fiscal_invoice_line_view.xml
+-rw-r--r--  2.0 unx     5120 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/views/fiscal_invoice_view.xml
+-rw-r--r--  2.0 unx      630 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/views/fiscal_operation_line_view.xml
+-rw-r--r--  2.0 unx     2339 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/views/fiscal_operation_view.xml
+-rw-r--r--  2.0 unx     8380 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/views/l10n_br_account_action.xml
+-rw-r--r--  2.0 unx      963 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/views/l10n_br_account_menu.xml
+-rw-r--r--  2.0 unx     1434 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/views/res_partner_view.xml
+-rw-r--r--  2.0 unx      254 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/wizards/__init__.py
+-rw-r--r--  2.0 unx      684 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/wizards/account_move_reversal.py
+-rw-r--r--  2.0 unx      524 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/wizards/account_move_reversal_view.xml
+-rw-r--r--  2.0 unx      836 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/wizards/base_wizard_mixin.py
+-rw-r--r--  2.0 unx      602 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/wizards/wizard_document_cancel.py
+-rw-r--r--  2.0 unx      548 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/wizards/wizard_document_correction.py
+-rw-r--r--  2.0 unx      427 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/wizards/wizard_document_invalidate.py
+-rw-r--r--  2.0 unx      533 b- defN 23-Jun-06 14:07 odoo/addons/l10n_br_account/wizards/wizard_document_status.xml
+-rw-r--r--  2.0 unx     4455 b- defN 23-Jun-06 14:07 odoo14_addon_l10n_br_account-14.0.7.0.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-06 14:07 odoo14_addon_l10n_br_account-14.0.7.0.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-06 14:07 odoo14_addon_l10n_br_account-14.0.7.0.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     7816 b- defN 23-Jun-06 14:07 odoo14_addon_l10n_br_account-14.0.7.0.0.dist-info/RECORD
+71 files, 332863 bytes uncompressed, 86644 bytes compressed:  74.0%
```

## zipnote {}

```diff
@@ -36,26 +36,23 @@
 
 Filename: odoo/addons/l10n_br_account/models/account_document_line_mixin.py
 Comment: 
 
 Filename: odoo/addons/l10n_br_account/models/account_incoterms.py
 Comment: 
 
-Filename: odoo/addons/l10n_br_account/models/account_invoice.py
-Comment: 
-
-Filename: odoo/addons/l10n_br_account/models/account_invoice_line.py
-Comment: 
-
 Filename: odoo/addons/l10n_br_account/models/account_journal.py
 Comment: 
 
 Filename: odoo/addons/l10n_br_account/models/account_move.py
 Comment: 
 
+Filename: odoo/addons/l10n_br_account/models/account_move_line.py
+Comment: 
+
 Filename: odoo/addons/l10n_br_account/models/account_tax.py
 Comment: 
 
 Filename: odoo/addons/l10n_br_account/models/account_tax_group.py
 Comment: 
 
 Filename: odoo/addons/l10n_br_account/models/account_tax_template.py
@@ -198,20 +195,20 @@
 
 Filename: odoo/addons/l10n_br_account/wizards/wizard_document_invalidate.py
 Comment: 
 
 Filename: odoo/addons/l10n_br_account/wizards/wizard_document_status.xml
 Comment: 
 
-Filename: odoo14_addon_l10n_br_account-14.0.6.4.1.dev1.dist-info/METADATA
+Filename: odoo14_addon_l10n_br_account-14.0.7.0.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_l10n_br_account-14.0.6.4.1.dev1.dist-info/WHEEL
+Filename: odoo14_addon_l10n_br_account-14.0.7.0.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_l10n_br_account-14.0.6.4.1.dev1.dist-info/top_level.txt
+Filename: odoo14_addon_l10n_br_account-14.0.7.0.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_l10n_br_account-14.0.6.4.1.dev1.dist-info/RECORD
+Filename: odoo14_addon_l10n_br_account-14.0.7.0.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/l10n_br_account/__manifest__.py

```diff
@@ -3,15 +3,15 @@
 
 {
     "name": "Brazilian Localization Account",
     "category": "Localisation",
     "license": "AGPL-3",
     "author": "Akretion, Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/l10n-brazil",
-    "version": "14.0.6.4.0",
+    "version": "14.0.7.0.0",
     "development_status": "Beta",
     "maintainers": ["renatonlima", "rvalyi"],
     "depends": [
         "l10n_br_coa",
         "l10n_br_fiscal",
         "l10n_br_account_due_list",
     ],
```

## odoo/addons/l10n_br_account/i18n/l10n_br_account.pot

```diff
@@ -352,22 +352,22 @@
 
 #. module: l10n_br_account
 #: model:ir.model.fields,field_description:l10n_br_account.field_account_move_line__document_type_id
 msgid "Document Type"
 msgstr ""
 
 #. module: l10n_br_account
-#: code:addons/l10n_br_account/models/account_invoice_line.py:0
+#: code:addons/l10n_br_account/models/account_move_line.py:0
 #, python-format
 msgid ""
 "Document line dummy not found. Please contact your system administrator."
 msgstr ""
 
 #. module: l10n_br_account
-#: code:addons/l10n_br_account/models/account_invoice.py:0
+#: code:addons/l10n_br_account/models/account_move.py:0
 #, python-format
 msgid ""
 "Document without Return Fiscal Operation! \n"
 " Force one!"
 msgstr ""
 
 #. module: l10n_br_account
@@ -631,15 +631,15 @@
 #: model:ir.model.fields,field_description:l10n_br_account.field_account_move__partner_legal_name
 #: model_terms:ir.ui.view,arch_db:l10n_br_account.fiscal_invoice_search
 #: model_terms:ir.ui.view,arch_db:l10n_br_account.invoice_search
 msgid "Legal Name"
 msgstr ""
 
 #. module: l10n_br_account
-#: code:addons/l10n_br_account/models/account_invoice.py:0
+#: code:addons/l10n_br_account/models/account_move.py:0
 #, python-format
 msgid ""
 "Line without Return Fiscal Operation! \n"
 "\n"
 "                            Please force one! \n"
 "{}"
 msgstr ""
@@ -880,25 +880,25 @@
 
 #. module: l10n_br_account
 #: model:ir.model.fields,field_description:l10n_br_account.field_account_move_line__wh_move_line_id
 msgid "WH Account Move Line"
 msgstr ""
 
 #. module: l10n_br_account
-#: code:addons/l10n_br_account/models/account_invoice.py:0
+#: code:addons/l10n_br_account/models/account_move.py:0
 #, python-format
 msgid ""
 "You can't set this document number: {} to draft because this document is "
 "cancelled in SEFAZ"
 msgstr ""
 
 #. module: l10n_br_account
 #: code:addons/l10n_br_account/models/fiscal_document.py:0
 #, python-format
 msgid "You cannot delete a fiscal document which is not draft state."
 msgstr ""
 
 #. module: l10n_br_account
-#: code:addons/l10n_br_account/models/account_invoice_line.py:0
+#: code:addons/l10n_br_account/models/account_move_line.py:0
 #, python-format
 msgid "You cannot edit an invoice related to a withholding entry"
 msgstr ""
```

## odoo/addons/l10n_br_account/models/__init__.py

```diff
@@ -4,14 +4,13 @@
 from . import account_tax_group
 from . import fiscal_tax_group
 from . import account_tax_template
 from . import account_tax
 from . import fiscal_tax
 from . import fiscal_operation
 from . import fiscal_operation_line
-from . import account_invoice
-from . import account_invoice_line
+from . import account_move
+from . import account_move_line
 from . import fiscal_document
 from . import fiscal_document_line
-from . import account_move
 from . import account_incoterms
 from . import res_company
```

## odoo/addons/l10n_br_account/models/account_move.py

```diff
@@ -1,22 +1,667 @@
-# Copyright (C) 2021 - TODAY Renato Lima - Akretion
+# Copyright (C) 2009 - TODAY Renato Lima - Akretion
+# Copyright (C) 2019 - TODAY Raphaël Valyi - Akretion
+# Copyright (C) 2020 - TODAY Luis Felipe Mileo - KMEE
 # License AGPL-3 - See http://www.gnu.org/licenses/agpl-3.0.html
 
 from dateutil.relativedelta import relativedelta
 
-from odoo import models
+from odoo import _, api, fields, models
+from odoo.exceptions import UserError
 
 from odoo.addons.l10n_br_fiscal.constants.fiscal import (
     DOCUMENT_ISSUER_COMPANY,
+    DOCUMENT_ISSUER_PARTNER,
+    FISCAL_IN_OUT_ALL,
+    FISCAL_OUT,
+    MODELO_FISCAL_NFE,
     SITUACAO_EDOC_AUTORIZADA,
+    SITUACAO_EDOC_CANCELADA,
+    SITUACAO_EDOC_EM_DIGITACAO,
 )
 
+MOVE_TO_OPERATION = {
+    "out_invoice": "out",
+    "in_invoice": "in",
+    "out_refund": "in",
+    "in_refund": "out",
+    "out_receipt": "out",
+    "in_receipt": "in",
+}
+
+REFUND_TO_OPERATION = {
+    "out_invoice": "in",
+    "in_invoice": "out",
+    "out_refund": "out",
+    "in_refund": "in",
+}
+
+FISCAL_TYPE_REFUND = {
+    "out": ["purchase_refund", "in_return"],
+    "in": ["sale_refund", "out_return"],
+}
+
+MOVE_TAX_USER_TYPE = {
+    "out_invoice": "sale",
+    "in_invoice": "purchase",
+    "out_refund": "sale",
+    "in_refund": "purchase",
+}
+
+SHADOWED_FIELDS = [
+    "partner_id",
+    "company_id",
+    "currency_id",
+    "partner_shipping_id",
+    "user_id",
+]
+
 
 class AccountMove(models.Model):
-    _inherit = "account.move"
+    _name = "account.move"
+    _inherit = [
+        _name,
+        "l10n_br_fiscal.document.mixin.methods",
+        "l10n_br_fiscal.document.invoice.mixin",
+    ]
+    _inherits = {"l10n_br_fiscal.document": "fiscal_document_id"}
+    _order = "date DESC, name DESC"
+
+    # some account.move records _inherits from an fiscal.document that is
+    # disabled with active=False (dummy record) in the l10n_br_fiscal_document table.
+    # To make the invoices still visible, we set active=True
+    # in the account_move table.
+    active = fields.Boolean(
+        default=True,
+    )
+
+    cnpj_cpf = fields.Char(
+        string="CNPJ/CPF",
+        related="partner_id.cnpj_cpf",
+    )
+
+    legal_name = fields.Char(
+        string="Adapted Legal Name",
+        related="partner_id.legal_name",
+    )
+
+    ie = fields.Char(
+        string="Adapted State Tax Number",
+        related="partner_id.inscr_est",
+    )
+
+    document_electronic = fields.Boolean(
+        related="document_type_id.electronic",
+        string="Electronic?",
+    )
+
+    fiscal_document_id = fields.Many2one(
+        comodel_name="l10n_br_fiscal.document",
+        string="Fiscal Document",
+        required=True,
+        copy=False,
+        ondelete="cascade",
+    )
+
+    fiscal_operation_type = fields.Selection(
+        selection=FISCAL_IN_OUT_ALL,
+        related=None,
+        compute="_compute_fiscal_operation_type",
+    )
+
+    # override the incoterm inherited by the fiscal document
+    # to have the same value as the native incoterm of the invoice.
+    incoterm_id = fields.Many2one(related="invoice_incoterm_id")
+
+    def _compute_fiscal_operation_type(self):
+        for inv in self:
+            if inv.move_type == "entry":
+                # if it is a Journal Entry there is nothing to do.
+                inv.fiscal_operation_type = False
+                continue
+            if inv.fiscal_operation_id:
+                inv.fiscal_operation_type = (
+                    inv.fiscal_operation_id.fiscal_operation_type
+                )
+            else:
+                inv.fiscal_operation_type = MOVE_TO_OPERATION[inv.move_type]
+
+    def _get_amount_lines(self):
+        """Get object lines instaces used to compute fields"""
+        return self.mapped("invoice_line_ids")
+
+    @api.model
+    def _shadowed_fields(self):
+        """Returns the list of shadowed fields that are synced
+        from the parent."""
+        return SHADOWED_FIELDS
+
+    @api.model
+    def _inject_shadowed_fields(self, vals_list):
+        for vals in vals_list:
+            for field in self._shadowed_fields():
+                if vals.get(field):
+                    vals["fiscal_%s" % (field,)] = vals[field]
+
+    @api.model
+    def fields_view_get(
+        self, view_id=None, view_type="form", toolbar=False, submenu=False
+    ):
+        invoice_view = super().fields_view_get(view_id, view_type, toolbar, submenu)
+        if view_type == "form":
+            view = self.env["ir.ui.view"]
+
+            if view_id == self.env.ref("l10n_br_account.fiscal_invoice_form").id:
+                invoice_line_form_id = self.env.ref(
+                    "l10n_br_account.fiscal_invoice_line_form"
+                ).id
+                sub_form_view = self.env["account.move.line"].fields_view_get(
+                    view_id=invoice_line_form_id, view_type="form"
+                )["arch"]
+                sub_form_node = self.env["account.move.line"].inject_fiscal_fields(
+                    sub_form_view
+                )
+                sub_arch, sub_fields = view.postprocess_and_fields(
+                    sub_form_node, "account.move.line", False
+                )
+                line_field_name = "invoice_line_ids"
+                invoice_view["fields"][line_field_name]["views"]["form"] = {
+                    "fields": sub_fields,
+                    "arch": sub_arch,
+                }
+
+            else:
+                if invoice_view["fields"].get("invoice_line_ids"):
+                    invoice_line_form_id = self.env.ref(
+                        "l10n_br_account.invoice_form"
+                    ).id
+                    sub_form_view = invoice_view["fields"]["invoice_line_ids"]["views"][
+                        "form"
+                    ]["arch"]
+
+                    sub_form_node = self.env["account.move.line"].inject_fiscal_fields(
+                        sub_form_view
+                    )
+                    sub_arch, sub_fields = view.postprocess_and_fields(
+                        sub_form_node, "account.move.line", False
+                    )
+                    line_field_name = "invoice_line_ids"
+                    invoice_view["fields"][line_field_name]["views"]["form"] = {
+                        "fields": sub_fields,
+                        "arch": sub_arch,
+                    }
+
+                if invoice_view["fields"].get("line_ids"):
+                    invoice_line_form_id = self.env.ref(
+                        "l10n_br_account.invoice_form"
+                    ).id
+                    sub_form_view = invoice_view["fields"]["line_ids"]["views"]["tree"][
+                        "arch"
+                    ]
+
+                    sub_form_node = self.env["account.move.line"].inject_fiscal_fields(
+                        sub_form_view
+                    )
+                    sub_arch, sub_fields = view.postprocess_and_fields(
+                        sub_form_node, "account.move.line", False
+                    )
+                    line_field_name = "line_ids"
+                    invoice_view["fields"][line_field_name]["views"]["tree"] = {
+                        "fields": sub_fields,
+                        "arch": sub_arch,
+                    }
+
+        return invoice_view
+
+    @api.depends(
+        "line_ids.matched_debit_ids.debit_move_id.move_id.payment_id.is_matched",
+        "line_ids.matched_debit_ids.debit_move_id.move_id.line_ids.amount_residual",
+        "line_ids.matched_debit_ids.debit_move_id.move_id.line_ids.amount_residual_currency",
+        "line_ids.matched_credit_ids.credit_move_id.move_id.payment_id.is_matched",
+        "line_ids.matched_credit_ids.credit_move_id.move_id.line_ids.amount_residual",
+        "line_ids.matched_credit_ids.credit_move_id.move_id.line_ids.amount_residual_currency",
+        "line_ids.debit",
+        "line_ids.credit",
+        "line_ids.currency_id",
+        "line_ids.amount_currency",
+        "line_ids.amount_residual",
+        "line_ids.amount_residual_currency",
+        "line_ids.payment_id.state",
+        "line_ids.full_reconcile_id",
+        "ind_final",
+    )
+    def _compute_amount(self):
+        if self.company_id.country_id.code != "BR":
+            return super()._compute_amount()
+        for move in self:
+            for line in move.line_ids:
+                if (
+                    move.is_invoice(include_receipts=True)
+                    and not line.exclude_from_invoice_tab
+                ):
+                    line._update_taxes()
+
+        result = super()._compute_amount()
+        for move in self:
+            if move.move_type == "entry" or move.is_outbound():
+                sign = -1
+            else:
+                sign = 1
+            inv_line_ids = move.line_ids.filtered(
+                lambda l: not l.exclude_from_invoice_tab
+            )
+            move.amount_untaxed = sum(inv_line_ids.mapped("amount_untaxed"))
+            move.amount_tax = sum(inv_line_ids.mapped("amount_tax"))
+            move.amount_untaxed_signed = sign * sum(
+                inv_line_ids.mapped("amount_untaxed")
+            )
+            move.amount_tax_signed = sign * sum(inv_line_ids.mapped("amount_tax"))
+
+        return result
+
+    @api.onchange("ind_final")
+    def _onchange_ind_final(self):
+        """Trigger the recompute of the taxes when the ind_final is changed"""
+        for line in self.invoice_line_ids:
+            line._onchange_fiscal_operation_id()
+        return self._recompute_dynamic_lines(recompute_all_taxes=True)
+
+    @api.model
+    def default_get(self, fields_list):
+        defaults = super().default_get(fields_list)
+        move_type = self.env.context.get("default_move_type", "out_invoice")
+        if not move_type == "entry":
+            defaults["fiscal_operation_type"] = MOVE_TO_OPERATION[move_type]
+            if defaults["fiscal_operation_type"] == FISCAL_OUT:
+                defaults["issuer"] = DOCUMENT_ISSUER_COMPANY
+            else:
+                defaults["issuer"] = DOCUMENT_ISSUER_PARTNER
+        return defaults
+
+    @api.model
+    def _move_autocomplete_invoice_lines_create(self, vals_list):
+        new_vals_list = super(
+            AccountMove, self.with_context(lines_compute_amounts=True)
+        )._move_autocomplete_invoice_lines_create(vals_list)
+        for vals in new_vals_list:
+            if not vals.get("document_type_id"):
+                vals["fiscal_document_id"] = self.env.company.fiscal_dummy_id.id
+        return new_vals_list
+
+    def _move_autocomplete_invoice_lines_values(self):
+        self.ensure_one()
+        if self._context.get("lines_compute_amounts"):
+            self.line_ids._compute_amounts()
+        return super()._move_autocomplete_invoice_lines_values()
+
+    @api.model_create_multi
+    def create(self, vals_list):
+        self._inject_shadowed_fields(vals_list)
+        invoice = super().create(vals_list)
+        return invoice
+
+    def write(self, values):
+        self._inject_shadowed_fields([values])
+        result = super().write(values)
+        return result
+
+    def unlink(self):
+        """Allows delete a draft or cancelled invoices"""
+        unlink_moves = self.env["account.move"]
+        unlink_documents = self.env["l10n_br_fiscal.document"]
+        for move in self:
+            if not move.exists():
+                continue
+            if (
+                move.fiscal_document_id
+                and move.fiscal_document_id.id != self.env.company.fiscal_dummy_id.id
+            ):
+                unlink_documents |= move.fiscal_document_id
+            unlink_moves |= move
+        result = super(AccountMove, unlink_moves).unlink()
+        unlink_documents.unlink()
+        self.clear_caches()
+        return result
+
+    @api.returns("self", lambda value: value.id)
+    def copy(self, default=None):
+        default = default or {}
+        if self.document_type_id:
+            default["fiscal_line_ids"] = False
+        else:
+            default["fiscal_line_ids"] = self.line_ids[0]
+        return super().copy(default)
+
+    @api.model
+    def _serialize_tax_grouping_key(self, grouping_dict):
+        return "-".join(str(v) for v in grouping_dict.values())
+
+    @api.model
+    def _compute_taxes_mapped(self, base_line):
+
+        move = base_line.move_id
+
+        if move.is_invoice(include_receipts=True):
+            handle_price_include = True
+            sign = -1 if move.is_inbound() else 1
+            quantity = base_line.quantity
+            is_refund = move.move_type in ("out_refund", "in_refund")
+            price_unit_wo_discount = (
+                sign * base_line.price_unit * (1 - (base_line.discount / 100.0))
+            )
+        else:
+            handle_price_include = False
+            quantity = 1.0
+            tax_type = base_line.tax_ids[0].type_tax_use if base_line.tax_ids else None
+            is_refund = (tax_type == "sale" and base_line.debit) or (
+                tax_type == "purchase" and base_line.credit
+            )
+            price_unit_wo_discount = base_line.amount_currency
+
+        balance_taxes_res = base_line.tax_ids._origin.with_context(
+            force_sign=move._get_tax_force_sign()
+        ).compute_all(
+            price_unit_wo_discount,
+            currency=base_line.currency_id,
+            quantity=quantity,
+            product=base_line.product_id,
+            partner=base_line.partner_id,
+            is_refund=is_refund,
+            handle_price_include=handle_price_include,
+            fiscal_taxes=base_line.fiscal_tax_ids,
+            operation_line=base_line.fiscal_operation_line_id,
+            ncm=base_line.ncm_id,
+            nbs=base_line.nbs_id,
+            nbm=base_line.nbm_id,
+            cest=base_line.cest_id,
+            discount_value=base_line.discount_value,
+            insurance_value=base_line.insurance_value,
+            other_value=base_line.other_value,
+            freight_value=base_line.freight_value,
+            fiscal_price=base_line.fiscal_price,
+            fiscal_quantity=base_line.fiscal_quantity,
+            uot_id=base_line.uot_id,
+            icmssn_range=base_line.icmssn_range_id,
+            icms_origin=base_line.icms_origin,
+            ind_final=base_line.ind_final,
+        )
+
+        return balance_taxes_res
+
+    def _preprocess_taxes_map(self, taxes_map):
+        """Useful in case we want to pre-process taxes_map"""
+
+        taxes_mapped = super()._preprocess_taxes_map(taxes_map=taxes_map)
+
+        for line in self.line_ids.filtered(
+            lambda line: not line.tax_repartition_line_id
+        ):
+            if not line.tax_ids or not line.fiscal_tax_ids:
+                continue
+
+            compute_all_vals = self._compute_taxes_mapped(line)
+
+            for tax_vals in compute_all_vals["taxes"]:
+                grouping_dict = self._get_tax_grouping_key_from_base_line(
+                    line, tax_vals
+                )
+                grouping_key = self._serialize_tax_grouping_key(grouping_dict)
+
+                tax_repartition_line = self.env["account.tax.repartition.line"].browse(
+                    tax_vals["tax_repartition_line_id"]
+                )
+
+                if taxes_mapped[grouping_key]:
+                    taxes_mapped[grouping_key]["amount"] += tax_vals["amount"]
+                    taxes_mapped[grouping_key][
+                        "tax_base_amount"
+                    ] += self._get_base_amount_to_display(
+                        tax_vals["base"], tax_repartition_line, tax_vals["group"]
+                    )
+
+        return taxes_mapped
+
+    def _recompute_payment_terms_lines(self):
+        """Compute the dynamic payment term lines of the journal entry.
+        overwritten this method to change aml's field name.
+        """
+
+        # TODO - esse método é executado em um onchange, na emissão de um novo
+        # documento fiscal o numero do documento pode estar em branco
+        # atualizar esse dado ao validar a fatura, ou atribuir o número da NFe
+        # antes de salva-la.
+        result = super()._recompute_payment_terms_lines()
+        if self.document_number:
+            terms_lines = self.line_ids.filtered(
+                lambda l: l.account_id.user_type_id.type in ("receivable", "payable")
+                and l.move_id.document_type_id
+            )
+            terms_lines.sorted(lambda line: line.date_maturity)
+            for idx, terms_line in enumerate(terms_lines):
+                # TODO TODO pegar o método do self.fiscal_document_id.with_context(
+                # fiscal_document_no_company=True
+                # )._compute_document_name()
+                terms_line.name = "{}/{}-{}".format(
+                    self.document_number, idx + 1, len(terms_lines)
+                )
+        return result
+
+    # @api.model
+    # def invoice_line_move_line_get(self):
+    #     # TODO FIXME migrate. No such method in Odoo 13+
+    #     move_lines_dict = super().invoice_line_move_line_get()
+    #     new_mv_lines_dict = []
+    #     for line in move_lines_dict:
+    #         invoice_line = self.line_ids.filtered(lambda l: l.id == line.get("invl_id"))
+    #
+    #         if invoice_line.fiscal_operation_id:
+    #             if invoice_line.fiscal_operation_id.deductible_taxes:
+    #                 line["price"] = invoice_line.price_total
+    #             else:
+    #                 line["price"] = invoice_line.price_total - (
+    #                     invoice_line.amount_tax_withholding
+    #                     + invoice_line.amount_tax_included
+    #                 )
+    #
+    #         if invoice_line.cfop_id:
+    #             if invoice_line.cfop_id.finance_move:
+    #                 new_mv_lines_dict.append(line)
+    #         else:
+    #             new_mv_lines_dict.append(line)
+    #
+    #     return new_mv_lines_dict
+    #
+
+    @api.onchange("fiscal_operation_id")
+    def _onchange_fiscal_operation_id(self):
+        result = super()._onchange_fiscal_operation_id()
+        if self.fiscal_operation_id and self.fiscal_operation_id.journal_id:
+            self.journal_id = self.fiscal_operation_id.journal_id
+        return result
+
+    def open_fiscal_document(self):
+        if self.env.context.get("move_type", "") == "out_invoice":
+            xmlid = "l10n_br_account.fiscal_invoice_out_action"
+        elif self.env.context.get("move_type", "") == "in_invoice":
+            xmlid = "l10n_br_account.fiscal_invoice_in_action"
+        else:
+            xmlid = "l10n_br_account.fiscal_invoice_all_action"
+        action = self.env["ir.actions.act_window"]._for_xml_id(xmlid)
+        form_view = [(self.env.ref("l10n_br_account.fiscal_invoice_form").id, "form")]
+        if "views" in action:
+            action["views"] = form_view + [
+                (state, view) for state, view in action["views"] if view != "form"
+            ]
+        else:
+            action["views"] = form_view
+        action["res_id"] = self.id
+        return action
+
+    def action_date_assign(self):
+        """Usamos esse método para definir a data de emissão do documento
+        fiscal e numeração do documento fiscal para ser usado nas linhas
+        dos lançamentos contábeis."""
+        # TODO FIXME migrate. No such method in Odoo 13+
+        result = super().action_date_assign()
+        for invoice in self:
+            if invoice.document_type_id:
+                if invoice.issuer == DOCUMENT_ISSUER_COMPANY:
+                    invoice.fiscal_document_id._document_date()
+                    invoice.fiscal_document_id._document_number()
+        return result
+
+    def button_draft(self):
+        for i in self.filtered(lambda d: d.document_type_id):
+            if i.state_edoc == SITUACAO_EDOC_CANCELADA:
+                if i.issuer == DOCUMENT_ISSUER_COMPANY:
+                    raise UserError(
+                        _(
+                            "You can't set this document number: {} to draft "
+                            "because this document is cancelled in SEFAZ"
+                        ).format(i.document_number)
+                    )
+            if i.state_edoc != SITUACAO_EDOC_EM_DIGITACAO:
+                i.fiscal_document_id.action_document_back2draft()
+        return super().button_draft()
+
+    def action_document_send(self):
+        invoices = self.filtered(lambda d: d.document_type_id)
+        if invoices:
+            invoices.mapped("fiscal_document_id").action_document_send()
+            # FIXME: na migração para a v14 foi permitido o post antes do envio
+            #  para destravar a migração, mas poderia ser cogitado de obrigar a
+            #  transmissão antes do post novamente como na v12.
+            # for invoice in invoices:
+            #     invoice.move_id.post(invoice=invoice)
+
+    def action_document_cancel(self):
+        for i in self.filtered(lambda d: d.document_type_id):
+            return i.fiscal_document_id.action_document_cancel()
+
+    def action_document_correction(self):
+        for i in self.filtered(lambda d: d.document_type_id):
+            return i.fiscal_document_id.action_document_correction()
+
+    def action_document_invalidate(self):
+        for i in self.filtered(lambda d: d.document_type_id):
+            return i.fiscal_document_id.action_document_invalidate()
+
+    def action_document_back2draft(self):
+        """Sets fiscal document to draft state and cancel and set to draft
+        the related invoice for both documents remain equivalent state."""
+        for i in self.filtered(lambda d: d.document_type_id):
+            i.button_cancel()
+            i.button_draft()
+
+    def action_post(self):
+        result = super().action_post()
+
+        self.mapped("fiscal_document_id").filtered(
+            lambda d: d.document_type_id
+        ).action_document_confirm()
+
+        # TODO FIXME
+        # Deixar a migração das funcionalidades do refund por último.
+        # Verificar se ainda haverá necessidade desse código.
+
+        # for record in self.filtered(lambda i: i.refund_move_id):
+        #     if record.state == "open":
+        #         # Ao confirmar uma fatura/documento fiscal se é uma devolução
+        #         # é feito conciliado com o documento de origem para abater
+        #         # o valor devolvido pelo documento de refund
+        #         to_reconcile_lines = self.env["account.move.line"]
+        #         for line in record.move_id.line_ids:
+        #             if line.account_id.id == record.account_id.id:
+        #                 to_reconcile_lines += line
+        #             if line.reconciled:
+        #                 line.remove_move_reconcile()
+        #         for line in record.refund_move_id.move_id.line_ids:
+        #             if line.account_id.id == record.refund_move_id.account_id.id:
+        #                 to_reconcile_lines += line
+
+        #         to_reconcile_lines.filtered(lambda l: l.reconciled).reconcile()
+
+        return result
+
+    def view_xml(self):
+        self.ensure_one()
+        return self.fiscal_document_id.view_xml()
+
+    def view_pdf(self):
+        self.ensure_one()
+        return self.fiscal_document_id.view_pdf()
+
+    def action_send_email(self):
+        self.ensure_one()
+        return self.fiscal_document_id.action_send_email()
+
+    @api.onchange("document_type_id")
+    def _onchange_document_type_id(self):
+        # We need to ensure that invoices without a fiscal document have the
+        # document_number blank, as all invoices without a fiscal document share this
+        # same field, they are linked to the same dummy fiscal document.
+        # Otherwise, in the tree view, this field will be displayed with the same value
+        # for all these invoices.
+        if not self.document_type_id:
+            self.document_number = ""
+
+    def _reverse_moves(self, default_values_list=None, cancel=False):
+        new_moves = super()._reverse_moves(
+            default_values_list=default_values_list, cancel=cancel
+        )
+        force_fiscal_operation_id = False
+        if self.env.context.get("force_fiscal_operation_id"):
+            force_fiscal_operation_id = self.env["l10n_br_fiscal.operation"].browse(
+                self.env.context.get("force_fiscal_operation_id")
+            )
+        for record in new_moves.filtered(lambda i: i.document_type_id):
+            if (
+                not force_fiscal_operation_id
+                and not record.fiscal_operation_id.return_fiscal_operation_id
+            ):
+                raise UserError(
+                    _("""Document without Return Fiscal Operation! \n Force one!""")
+                )
+
+            record.fiscal_operation_id = (
+                force_fiscal_operation_id
+                or record.fiscal_operation_id.return_fiscal_operation_id
+            )
+            record._onchange_fiscal_operation_id()
+
+            for line in record.invoice_line_ids:
+                if (
+                    not force_fiscal_operation_id
+                    and not line.fiscal_operation_id.return_fiscal_operation_id
+                ):
+                    raise UserError(
+                        _(
+                            """Line without Return Fiscal Operation! \n
+                            Please force one! \n{}""".format(
+                                line.name
+                            )
+                        )
+                    )
+
+                line.fiscal_operation_id = (
+                    force_fiscal_operation_id
+                    or line.fiscal_operation_id.return_fiscal_operation_id
+                )
+                line._onchange_fiscal_operation_id()
+
+            # Adds the related document to the NF-e.
+            # this is required for correct xml validation
+            if record.document_type_id and record.document_type_id.code in (
+                MODELO_FISCAL_NFE
+            ):
+                record.fiscal_document_id._document_reference(
+                    record.reversed_entry_id.fiscal_document_id
+                )
+
+        return new_moves
 
     def _prepare_wh_invoice(self, move_line, fiscal_group):
         wh_date_invoice = move_line.move_id.date
         wh_due_invoice = wh_date_invoice.replace(day=fiscal_group.wh_due_day)
         values = {
             "partner_id": fiscal_group.partner_id.id,
             "date": wh_date_invoice,
```

## Comparing `odoo/addons/l10n_br_account/models/account_invoice_line.py` & `odoo/addons/l10n_br_account/models/account_move_line.py`

 * *Files identical despite different names*

## Comparing `odoo14_addon_l10n_br_account-14.0.6.4.1.dev1.dist-info/METADATA` & `odoo14_addon_l10n_br_account-14.0.7.0.0.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-l10n-br-account
-Version: 14.0.6.4.1.dev1
+Version: 14.0.7.0.0
 Summary: Brazilian Localization Account
 Home-page: https://github.com/OCA/l10n-brazil
 Author: Akretion, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo14_addon_l10n_br_account-14.0.6.4.1.dev1.dist-info/RECORD` & `odoo14_addon_l10n_br_account-14.0.7.0.0.dist-info/RECORD`

 * *Files 5% similar despite different names*

```diff
@@ -1,25 +1,24 @@
 odoo/addons/l10n_br_account/README.rst,sha256=Jd2fbGk3bsvEnzSs-OpaGpzLYeUu6UVJ97zN-WLZSQQ,3735
 odoo/addons/l10n_br_account/__init__.py,sha256=jMSBfI5VSmcek5enCwy1kqHbnrpdpGQ9IOt34WMTBpQ,132
-odoo/addons/l10n_br_account/__manifest__.py,sha256=CCOSkq8JpXIBhi8h0jDlTOSEE72GWsDpXtHd-mUAEgs,1669
+odoo/addons/l10n_br_account/__manifest__.py,sha256=r7f85hn1WIY5iqcau9z5LQPUStyhFyUzmbyuOu9zoTo,1669
 odoo/addons/l10n_br_account/hooks.py,sha256=1BYdlM2ke9doLllGLJPbbd05uLJj1N_TVw6nQr1fn9E,4574
 odoo/addons/l10n_br_account/data/account_tax_group.xml,sha256=CuAhEzywZARclSHbbQzzi1wOLkgodIX2tzjjnmon49U,4977
 odoo/addons/l10n_br_account/data/account_tax_template.xml,sha256=UETUztIZjDm2r1GIBoPfpzz0c6oM0JOuiuoRaUb9lgo,10424
 odoo/addons/l10n_br_account/demo/res_users_demo.xml,sha256=A2YrhscQvX1URMUEvChmhU6lgWMabH47Ta7HbGsIM24,401
-odoo/addons/l10n_br_account/i18n/l10n_br_account.pot,sha256=xnOqQxyoM_WXNDkN-tsVwRk5xifQjYvDoomgCxUUmsM,37019
+odoo/addons/l10n_br_account/i18n/l10n_br_account.pot,sha256=7Ztuw655AFq2dUFnqCP7lLarkwlJaYraT92HkniuDiQ,37004
 odoo/addons/l10n_br_account/i18n/pt_BR.po,sha256=wSw7CzAqNnohAZVMo_UVbipec0HJXZwxCqXs9ZIsOPI,42093
 odoo/addons/l10n_br_account/images/l10n_br-hover.png,sha256=W88veSPXUFQ2DvZ-79ei1a3YsxSVTXcE31gGGYJAXZs,5558
 odoo/addons/l10n_br_account/images/l10n_br.png,sha256=QEfAdjlF6_zXDjNI2VF8vFduvFipmuK7yAGTlPWmBlo,4953
-odoo/addons/l10n_br_account/models/__init__.py,sha256=ayTgdouhTlr5DOnqNuG5Pmtbk14A9cKHqEmDBT1IKsY,539
+odoo/addons/l10n_br_account/models/__init__.py,sha256=SeTpwB13IR4Yu1PHAgrHDWLGupHMvYXrSIEHH71-obM,506
 odoo/addons/l10n_br_account/models/account_document_line_mixin.py,sha256=RD_G48vHGBC92JSd_N89EFqRDRupQRz9bFUSfcFmisI,694
 odoo/addons/l10n_br_account/models/account_incoterms.py,sha256=p0D-1HJhFzasD2GcajwR-wjbtQfC3Snf-14O7owKI5k,1046
-odoo/addons/l10n_br_account/models/account_invoice.py,sha256=OMCPT-6kyn-tdvlMkPLwLVCT_FArWJeSMrQUZdH2BIA,26161
-odoo/addons/l10n_br_account/models/account_invoice_line.py,sha256=YEqWqUvfUGhBWrnbuXh6I_3edmosDxjzmlKl_lxL1QA,21790
 odoo/addons/l10n_br_account/models/account_journal.py,sha256=5ISRhD2dCkK5NQglC7wPFamAQ-1y1o_uTIudUixEh0Y,300
-odoo/addons/l10n_br_account/models/account_move.py,sha256=WF86uK9CQmRhGDgPitmc5M6Z-rxGe-9dNYxbdn4KwiI,4819
+odoo/addons/l10n_br_account/models/account_move.py,sha256=2xEk-L0xWS1Jd7RPvDCte65ZQ9emy6aZdNMKX3_a9lY,30135
+odoo/addons/l10n_br_account/models/account_move_line.py,sha256=YEqWqUvfUGhBWrnbuXh6I_3edmosDxjzmlKl_lxL1QA,21790
 odoo/addons/l10n_br_account/models/account_tax.py,sha256=2QJKqkePK0rTuh5ASmMmeThtuBtkMjmI9_x0OdUQ-yE,6584
 odoo/addons/l10n_br_account/models/account_tax_group.py,sha256=ExUfbcnUavKtPfzzVarFC6k-XzFo3zMvHBpcWlZhQxs,742
 odoo/addons/l10n_br_account/models/account_tax_template.py,sha256=aeFrf0AQbhge1Vi7M290yu88cz4V1jTYEOcKJI8TzX8,939
 odoo/addons/l10n_br_account/models/fiscal_document.py,sha256=YZNhVFPfzW9yqORtmhvqhrsofNXXesdPYdmegsf5-s0,5290
 odoo/addons/l10n_br_account/models/fiscal_document_line.py,sha256=irO3z3-dkuM4KzJJC-jmBAhcVt_mMGIA6QXkWrgbS7I,2140
 odoo/addons/l10n_br_account/models/fiscal_operation.py,sha256=aZy7-Aj06ie0JfiJW1OCdDT3q2Y8JYk0nED9_MQwZXw,2933
 odoo/addons/l10n_br_account/models/fiscal_operation_line.py,sha256=go7UGuuosFxPmkP8isG4hj5tUTEA_4DOL3qB3WD6nRY,452
@@ -62,11 +61,11 @@
 odoo/addons/l10n_br_account/wizards/account_move_reversal.py,sha256=f1NrM_UXCy4nAncdJllvytkr-ueaTmxX4nuwVW2SmfQ,684
 odoo/addons/l10n_br_account/wizards/account_move_reversal_view.xml,sha256=oqcH-xEjpxkGgSdFzg3hmLLsvkbslfJcAWvvOjpDKCw,524
 odoo/addons/l10n_br_account/wizards/base_wizard_mixin.py,sha256=6sZYYbgkkl3VFH4yEPAhEfS4N3rEeYUi-EsHXoeFfrg,836
 odoo/addons/l10n_br_account/wizards/wizard_document_cancel.py,sha256=qX5KZo_JXmMTtE_6-bkLMfhYuy0RtjUggqa61gwLD0g,602
 odoo/addons/l10n_br_account/wizards/wizard_document_correction.py,sha256=Ydgjw4VRYXEM-b9eGzVAe7fzgkPrIci1fFwXYgSts9U,548
 odoo/addons/l10n_br_account/wizards/wizard_document_invalidate.py,sha256=V6jTdrYgtLO8nHhTC1zx_Px3wPlyOdpRU611w1qkeb0,427
 odoo/addons/l10n_br_account/wizards/wizard_document_status.xml,sha256=blXhOVQgyPq-_4G4w7iJa2RKc1KepGCLHca-EqPMw0g,533
-odoo14_addon_l10n_br_account-14.0.6.4.1.dev1.dist-info/METADATA,sha256=M-q2hJ54XyOmyfl9u-PDkjdaA6dIUlLJgpkmXgxCGPc,4460
-odoo14_addon_l10n_br_account-14.0.6.4.1.dev1.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo14_addon_l10n_br_account-14.0.6.4.1.dev1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_l10n_br_account-14.0.6.4.1.dev1.dist-info/RECORD,,
+odoo14_addon_l10n_br_account-14.0.7.0.0.dist-info/METADATA,sha256=Cbj_AaizF8CvmCvaiSok5a4amLG6P8A45ykpiqv4p58,4455
+odoo14_addon_l10n_br_account-14.0.7.0.0.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo14_addon_l10n_br_account-14.0.7.0.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_l10n_br_account-14.0.7.0.0.dist-info/RECORD,,
```

